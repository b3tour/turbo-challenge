eyJhbGciOiJIUzI1NiIPlan Implementacji: Dual Mode - Turbo Challenge + Turbo Grywalizacja
Rozszerzenie aplikacji o system wyboru trybu gry przy logowaniu:

Turbo Challenge - obecna wersja (rywalizacja indywidualna) - pozostaje bez zmian
Turbo Grywalizacja - nowy tryb (rywalizacja dru≈ºynowa 4-5 dru≈ºyn)
User Review Required
IMPORTANT

System Wyboru Trybu Gry U≈ºytkownik przy logowaniu wybiera tryb:

Turbo Challenge - istniejƒÖcy system indywidualny (bez zmian)
Turbo Grywalizacja - nowy system dru≈ºynowy
Tryb bƒôdzie zapisywany w sesji u≈ºytkownika i bƒôdzie mo≈ºna go zmieniƒá w ustawieniach profilu.

IMPORTANT

Przypisanie u≈ºytkownik√≥w do dru≈ºyn (tylko w trybie Grywalizacja) Zak≈Çadamy rƒôczne przypisanie przez administratora z mo≈ºliwo≈õciƒÖ p√≥≈∫niejszej zmiany.

IMPORTANT

Nazwy i kolory dru≈ºyn Proszƒô o podanie:

Nazw dru≈ºyn (4-5 dru≈ºyn)
Preferowanych kolor√≥w dla ka≈ºdej dru≈ºyny
Opcjonalnie: logo/emoji dla ka≈ºdej dru≈ºyny
Domy≈õlnie przyjmujƒô:

Turbo Racers - Czerwony (#EF4444)
Speed Demons - Niebieski (#3B82F6)
Power Squad - Zielony (#10B981)
Nitro Force - Pomara≈Ñczowy (#F59E0B)
Thunder Team - Fioletowy (#A855F7)
Proposed Changes
System Wyboru Trybu
[NEW] 
ModeSelector.tsx
Komponent wyboru trybu gry wy≈õwietlany przy logowaniu:

Dwie du≈ºe karty do wyboru:
Turbo Challenge (indywidualny) - ikona üèÜ
Turbo Grywalizacja (dru≈ºynowy) - ikona üë•
Efekty hover i animacje
Kr√≥tki opis ka≈ºdego trybu
Modern glassmorphism design
[MODIFY] 
login/page.tsx
Dodanie wyboru trybu po zalogowaniu:

Po pomy≈õlnym logowaniu ‚Üí przekierowanie do /mode-select
Zapisanie wyboru w localStorage i Supabase (pole preferred_mode w tabeli users)
[NEW] 
mode-select/page.tsx
Strona wyboru trybu:

Wy≈õwietlenie ModeSelector
Zapisanie wyboru u≈ºytkownika
Przekierowanie do /dashboard
[MODIFY] 
types/index.ts
Rozszerzenie interfejsu User:

interface User {
  // ... istniejƒÖce pola
  preferred_mode?: 'individual' | 'team'; // nowe pole
}
[NEW] 
useModeContext.tsx
Context dla globalnego zarzƒÖdzania trybem:

currentMode: 'individual' | 'team'
setMode(mode) - zmiana trybu
isModeSelected - czy u≈ºytkownik wybra≈Ç tryb
Persist w localStorage
Baza Danych
[MODIFY] 
schema.sql
Aktualizacja tabeli users

Dodanie kolumny preferred_mode ('individual' | 'team') DEFAULT 'individual'
Pole okre≈õla preferowany tryb gry u≈ºytkownika
Rozszerzenie tabeli crews (teams)

Dodanie kolumny color (kolor dru≈ºyny w formacie hex)
Dodanie kolumny emoji (emoji/ikona dru≈ºyny)
Dodanie order_index dla kolejno≈õci wy≈õwietlania
Aktualizacja total_xp poprzez trigger
Dodanie is_active dla w≈ÇƒÖczania/wy≈ÇƒÖczania dru≈ºyn
Nowa tabela team_members

Tabela ≈ÇƒÖczƒÖca u≈ºytkownik√≥w z dru≈ºynami
Pola: id, team_id, user_id, joined_at, assigned_by
Unikalne po≈ÇƒÖczenie u≈ºytkownika z dru≈ºynƒÖ (jeden u≈ºytkownik = jedna dru≈ºyna)
Nowa funkcja update_team_xp()

Automatyczne przeliczanie sumy XP dru≈ºyny
Trigger wywo≈Çywany przy ka≈ºdej zmianie XP u≈ºytkownika
Nowy widok team_leaderboard

Ranking dru≈ºyn z sumƒÖ XP, liczbƒÖ cz≈Çonk√≥w i statystykami
Oblicza ≈õrednie XP na cz≈Çonka dru≈ºyny
Aktualizacja funkcji add_user_xp()

Dodanie aktualizacji XP dru≈ºyny po dodaniu XP u≈ºytkownikowi
TypeScript Types
[MODIFY] 
index.ts
Rozszerzenie interfejsu 
User

Dodanie team_id?: string
Usuniƒôcie przestarza≈Çych p√≥l class i crew_id
Nowy interfejs Team (zastƒôpuje 
Crew
)

interface Team {
  id: string;
  name: string;
  description?: string;
  color: string;
  emoji: string;
  total_xp: number;
  member_count: number;
  avg_xp_per_member: number;
  order_index: number;
  is_active: boolean;
  created_at: string;
}
Nowy interfejs TeamMember

interface TeamMember {
  id: string;
  team_id: string;
  user_id: string;
  joined_at: string;
  assigned_by?: string;
  user?: User;
}
Nowy interfejs TeamLeaderboardEntry

interface TeamLeaderboardEntry {
  rank: number;
  team: Team;
  total_xp: number;
  missions_completed: number;
  active_members: number;
  top_contributors: Array<{
    nick: string;
    avatar_url?: string;
    xp: number;
  }>;
}
Nowy interfejs TeamStats

interface TeamStats {
  team_id: string;
  total_missions: number;
  total_xp: number;
  avg_xp_per_member: number;
  most_active_member: {
    user_id: string;
    nick: string;
    xp: number;
  };
}
Hooks
[NEW] 
useTeams.ts
Custom hook do zarzƒÖdzania dru≈ºynami:

fetchTeams() - pobieranie wszystkich dru≈ºyn
getTeam(id) - pobieranie szczeg√≥≈Ç√≥w dru≈ºyny
getTeamMembers(teamId) - pobieranie cz≈Çonk√≥w dru≈ºyny
assignUserToTeam(userId, teamId) - przypisanie u≈ºytkownika
removeUserFromTeam(userId) - usuniƒôcie z dru≈ºyny
getTeamStats(teamId) - statystyki dru≈ºyny
Real-time subscription dla zmian
[NEW] 
useTeamLeaderboard.ts
Hook dla rankingu dru≈ºynowego:

fetchTeamLeaderboard() - ranking dru≈ºyn
getTeamRank(teamId) - pozycja dru≈ºyny
getTeamStats() - og√≥lne statystyki
Real-time updates
[MODIFY] 
useLeaderboard.ts
Dodanie opcji filtrowania po dru≈ºynie:

Nowy parametr teamId?: string w options
Filtrowanie graczy tylko z danej dru≈ºyny
Komponenty UI
[NEW] 
TeamCard.tsx
Komponent karty dru≈ºyny pokazujƒÖcy:

Nazwƒô i emoji dru≈ºyny
Kolor dru≈ºyny (gradient background)
Sumƒô XP dru≈ºyny
Liczbƒô cz≈Çonk√≥w
Pozycjƒô w rankingu
Top 3 cz≈Çonk√≥w (awatary)
Animacje hover
[NEW] 
TeamBadge.tsx
Ma≈Çy badge z kolorem i nazwƒÖ dru≈ºyny do u≈ºycia w innych komponentach

[NEW] 
TeamMembersList.tsx
Lista cz≈Çonk√≥w dru≈ºyny z:

Awatarem, nickiem, poziomem
XP u≈ºytkownika
LiczbƒÖ uko≈Ñczonych misji
Sortowanie po XP
[NEW] 
TeamLeaderboardView.tsx
Widok rankingu dru≈ºynowego:

Podium dla top 3 dru≈ºyn
Lista wszystkich dru≈ºyn
Animacje i efekty wizualne
Statystyki
Strony
[NEW] 
teams/page.tsx
G≈Ç√≥wna strona dru≈ºyn pokazujƒÖca:

Listƒô wszystkich dru≈ºyn (grid layout)
Karty dru≈ºyn z TeamCard
Statystyki og√≥lne
Przycisk do szczeg√≥≈Ç√≥w ka≈ºdej dru≈ºyny
[NEW] 
teams/[id]/page.tsx
Strona szczeg√≥≈Ç√≥w dru≈ºyny:

Header z nazwƒÖ, kolorem, emoji
Statystyki dru≈ºyny (XP, ranking, misje)
Lista cz≈Çonk√≥w z TeamMembersList
Wykres progresji XP (opcjonalnie)
Historia ostatnich aktywno≈õci
[MODIFY] 
dashboard/page.tsx
Dodanie sekcji dru≈ºynowej:

Badge z przynale≈ºno≈õciƒÖ do dru≈ºyny
Mini-karta "Twoja dru≈ºyna" z:
NazwƒÖ i pozycjƒÖ w rankingu
SumƒÖ XP dru≈ºyny
Linkiem do szczeg√≥≈Ç√≥w dru≈ºyny
Sekcja "Inne dru≈ºyny" (mini preview)
[MODIFY] 
leaderboard/page.tsx
Dodanie trzeciego taba - "Dru≈ºyny":

Tab "Ranking XP" (istniejƒÖcy - indywidualny)
Tab "Speedrun" (istniejƒÖcy)
Tab "Dru≈ºyny" (nowy) - TeamLeaderboardView
Domy≈õlnie otwiera tab "Dru≈ºyny"
[MODIFY] 
missions/page.tsx
Pokazanie wk≈Çadu dla dru≈ºyny:

Badge dru≈ºyny przy XP reward
Informacja "Za wykonanie dostajesz X XP dla [Nazwa dru≈ºyny]"
Stats: "Twoja dru≈ºyna uko≈Ñczy≈Ça tƒô misjƒô X razy"
[MODIFY] 
profile/page.tsx
Dodanie sekcji trybu i dru≈ºyny:

Prze≈ÇƒÖcznik trybu - mo≈ºliwo≈õƒá zmiany miƒôdzy Turbo Challenge i Turbo Grywalizacja
Sekcja dru≈ºynowa (widoczna tylko w trybie team):
Wy≈õwietlenie nazwy dru≈ºyny i odznaki
Link do strony dru≈ºyny
Statystyki u≈ºytkownika w kontek≈õcie dru≈ºyny (wk≈Çad, pozycja w dru≈ºynie)
[MODIFY] 
admin/page.tsx
Panel zarzƒÖdzania dru≈ºynami:

Zak≈Çadka "ZarzƒÖdzanie dru≈ºynami"
Tworzenie/edycja dru≈ºyn
Przypisywanie u≈ºytkownik√≥w do dru≈ºyn
Zmiana kolor√≥w i nazw
PodglƒÖd statystyk
Styling & Design
[MODIFY] 
tailwind.config.js
Dodanie kolor√≥w dru≈ºyn:

team: {
  red: '#EF4444',
  blue: '#3B82F6',
  green: '#10B981',
  orange: '#F59E0B',
  purple: '#A855F7'
}
Nowe animacje:

team-pulse - pulsowanie koloru dru≈ºyny
slide-in-left/right - animacje wej≈õcia kart
bounce-subtle - subtelne odbicie dla nagr√≥d
Nowe gradient utilities:

Gradienty dla ka≈ºdego koloru dru≈ºyny
Og√≥lne ulepszenia designu
Glassmorphism

Karty z efektem szk≈Ça (backdrop-blur)
Semi-transparentne t≈Ça z kolorami dru≈ºyn
Animacje

Smooth transitions na wszystkich interakcjach
Hover effects na kartach
Page transitions
Responsywno≈õƒá

Mobile-first design
Breakpoints dla tablet i desktop
Touch-friendly elements
Kolorystyka

Dynamiczne kolory dru≈ºyn w ca≈Çej aplikacji
Gradient backgrounds dla nagr√≥d
Subtle glows dla pod≈õwietle≈Ñ
Navigation
[MODIFY] 
BottomNav.tsx
Dodanie nowej zak≈Çadki "Dru≈ºyny" (widoczna tylko w trybie team):

Ikona: Users z lucide-react
Route: /teams
Badge pokazujƒÖcy pozycjƒô dru≈ºyny w rankingu (opcjonalnie)
Warunkowe renderowanie na podstawie currentMode
Layout nawigacji:

Tryb Individual: Dashboard, Misje, Ranking, Profil (4 itemy)
Tryb Team: Dashboard, Misje, Dru≈ºyny, Ranking, Profil (5 item√≥w)
[MODIFY] 
Header.tsx
Dodanie badge'a dru≈ºyny w headerze (opcjonalnie):

Ma≈Çy kolorowy indicator przynale≈ºno≈õci do dru≈ºyny
Tooltip z nazwƒÖ dru≈ºyny