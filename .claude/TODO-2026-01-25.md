# TODO - Następna Sesja (25 Stycznia 2026)

## Przed Rozpoczęciem Pracy

### 1. Uruchom SQL w Supabase
Wejdź do Supabase Dashboard > SQL Editor i uruchom:

```sql
-- Nowe kolumny dla kart (extended info)
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_engine TEXT;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_cylinders INTEGER;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_acceleration DECIMAL(4,2);
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_weight INTEGER;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_drivetrain TEXT;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_fun_fact TEXT;

-- Tabela galerii zdjęć
CREATE TABLE IF NOT EXISTS card_images (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  card_id UUID NOT NULL REFERENCES cards(id) ON DELETE CASCADE,
  image_url TEXT NOT NULL,
  display_order INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX IF NOT EXISTS idx_card_images_card_id ON card_images(card_id);

ALTER TABLE card_images ENABLE ROW LEVEL SECURITY;

CREATE POLICY "card_images_select_all" ON card_images
  FOR SELECT USING (true);

CREATE POLICY "card_images_admin_all" ON card_images
  FOR ALL USING (
    EXISTS (SELECT 1 FROM users WHERE id = auth.uid() AND is_admin = true)
  );
```

### 2. Przetestuj Funkcjonalności

**W panelu admina (/admin > Karty):**
- [ ] Edytuj istniejącą kartę samochodu
- [ ] Dodaj dane rozszerzone (silnik, cylindry, przyspieszenie, masa, napęd, ciekawostka)
- [ ] Dodaj 2-3 zdjęcia do galerii
- [ ] Zapisz i sprawdź czy się zapisało

**Na stronie kart (/cards):**
- [ ] Kliknij kartę którą posiadasz
- [ ] Sprawdź czy widać "Szczegóły techniczne"
- [ ] Sprawdź czy widać "Ciekawostka"
- [ ] Sprawdź czy widać "Galeria"
- [ ] Kliknij "Zobacz wszystkie" w galerii
- [ ] Przetestuj nawigację strzałkami
- [ ] Przetestuj pobieranie tapety

### 3. Commit i Deploy

```bash
cd "C:\Users\WORK\Desktop\Aplikacja Turbo\turbo-challenge"
git add .
git commit -m "Add extended card info and gallery feature

- Added car_engine, car_cylinders, car_acceleration, car_weight, car_drivetrain, car_fun_fact fields
- Added card_images table for gallery (up to 6 photos)
- Gallery viewer with navigation and wallpaper download
- Admin panel: form fields for extended info and gallery management
- Info only visible to card owners (unlock incentive)"

git push origin main
```

---

## Niezcommitowane Pliki

```
M src/app/(app)/cards/page.tsx           # Galeria, extended info, download
M src/app/(admin)/admin/page.tsx         # Formularz galerii w admin
M src/hooks/useCards.ts                  # fetchCardImages()
M src/types/index.ts                     # CardImage interface
```

---

## Potencjalne Problemy

### Jeśli galeria nie działa:
1. Sprawdź czy SQL został uruchomiony
2. Sprawdź czy bucket `card-images` ma folder `cards/gallery/`
3. Sprawdź RLS policies w Supabase

### Jeśli upload nie działa:
1. Sprawdź Storage policies dla `card-images` bucket
2. Upewnij się że admin jest zalogowany

---

## Pomysły na Przyszłość

1. **Trade System** - wymiana kart między graczami
2. **Daily Spin** - codzienne losowanie karty
3. **Achievements** - odznaki za osiągnięcia
4. **Push Notifications** - powiadomienia o nowych misjach
5. **Crew System** - drużyny graczy

---

## Szybki Start Sesji

```bash
# 1. Otwórz projekt
cd "C:\Users\WORK\Desktop\Aplikacja Turbo\turbo-challenge"

# 2. Uruchom dev server
npm run dev

# 3. Otwórz w przeglądarce
# http://localhost:3000

# 4. Przeczytaj kontekst
# .claude/session-2026-01-24.md
# .claude/CLAUDE.md
```
