# Sesja Claude Code - 24 Stycznia 2026

## Podsumowanie Projektu

### O Aplikacji
**Turbo Challenge** - aplikacja grywalizacyjna dla Fundacji Turbo Pomoc. Gracze zbierają punkty XP wykonując misje, zbierają karty kolekcjonerskie samochodów i rywalizują w rankingach. Część funkcji (zakup kart) wspiera cele charytatywne.

### Stack Technologiczny
- **Frontend**: Next.js 14 (App Router), TypeScript, Tailwind CSS
- **Backend**: Supabase (PostgreSQL, Auth, Storage, RLS)
- **Hosting**: Vercel

### Struktura Folderów
```
src/
├── app/
│   ├── (app)/          # Strony dla zalogowanych (dashboard, cards, battles, etc.)
│   ├── (admin)/        # Panel administracyjny
│   └── (auth)/         # Logowanie, rejestracja, onboarding
├── components/
│   ├── ui/             # Komponenty UI (Button, Card, Modal, etc.)
│   └── cards/          # Komponenty kart kolekcjonerskich
├── hooks/              # Custom hooks (useAuth, useCards, useCardOrders, etc.)
├── lib/                # Utilities, Supabase client
└── types/              # TypeScript interfaces
```

---

## Co Zostało Zrobione w Tej Sesji

### 1. Rozszerzone Informacje o Kartach Samochodów
Dodano nowe pola dla kart samochodów, widoczne TYLKO po odblokowaniu karty:
- `car_engine` - typ silnika (np. "4.0L Boxer 6")
- `car_cylinders` - liczba cylindrów
- `car_acceleration` - przyspieszenie 0-100 km/h
- `car_weight` - masa w kg
- `car_drivetrain` - napęd (RWD/FWD/AWD)
- `car_fun_fact` - ciekawostka o aucie

**Pliki zmodyfikowane:**
- `src/types/index.ts` - dodano nowe pola do interfejsu `CollectibleCard`
- `src/app/(admin)/admin/page.tsx` - formularz edycji karty z nowymi polami
- `src/app/(app)/cards/page.tsx` - wyświetlanie rozszerzonych info w modalu

### 2. Galeria Zdjęć Karty
Dodano możliwość dodawania 3-6 zdjęć do galerii karty:
- Nowa tabela `card_images` w bazie danych
- Pełnoekranowa galeria z nawigacją (strzałki, miniatury)
- Możliwość pobierania zdjęć jako tapety

**Pliki zmodyfikowane:**
- `src/types/index.ts` - nowy interfejs `CardImage`
- `src/hooks/useCards.ts` - funkcja `fetchCardImages()`
- `src/app/(app)/cards/page.tsx` - galeria i przycisk pobierania
- `src/app/(admin)/admin/page.tsx` - zarządzanie galerią w formularzu

### 3. Wcześniejsze Zmiany (z poprzedniej części sesji)
- Mystery Garage - pakiety losowych kart
- Turbo Bitwy - PvP między graczami
- Animacje kart (wiggle-intense 7°)
- Usunięcie emoji marek i badge'y rzadkości z kart
- Paski statystyk na wszystkich kartach (nie tylko rare+)
- Link do Mystery Garage na stronie bitew

---

## SQL Do Uruchomienia w Supabase

```sql
-- =====================================================
-- ROZSZERZONE INFO O KARTACH + GALERIA
-- Uruchom w Supabase SQL Editor
-- =====================================================

-- 1. Nowe kolumny dla kart (extended info)
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_engine TEXT;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_cylinders INTEGER;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_acceleration DECIMAL(4,2);
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_weight INTEGER;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_drivetrain TEXT;
ALTER TABLE cards ADD COLUMN IF NOT EXISTS car_fun_fact TEXT;

-- 2. Tabela galerii zdjęć
CREATE TABLE IF NOT EXISTS card_images (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  card_id UUID NOT NULL REFERENCES cards(id) ON DELETE CASCADE,
  image_url TEXT NOT NULL,
  display_order INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 3. Indeks dla szybszych zapytań
CREATE INDEX IF NOT EXISTS idx_card_images_card_id ON card_images(card_id);

-- 4. RLS policies
ALTER TABLE card_images ENABLE ROW LEVEL SECURITY;

-- Każdy może czytać (frontend pokazuje tylko dla właścicieli)
CREATE POLICY "card_images_select_all" ON card_images
  FOR SELECT USING (true);

-- Tylko admini mogą modyfikować
CREATE POLICY "card_images_admin_all" ON card_images
  FOR ALL USING (
    EXISTS (SELECT 1 FROM users WHERE id = auth.uid() AND is_admin = true)
  );
```

---

## Kluczowe Pliki

### Typy (`src/types/index.ts`)
Zawiera wszystkie interfejsy:
- `User`, `Mission`, `Submission`
- `CollectibleCard` (z nowymi polami car_*)
- `CardImage` (galeria)
- `CardBattle`, `MysteryPackPurchase`, etc.

### Hooki
- `useAuth.tsx` - autentykacja i profil użytkownika
- `useCards.ts` - karty kolekcjonerskie + `fetchCardImages()`
- `useCardOrders.ts` - zamówienia kart
- `useLeaderboard.ts` - rankingi

### Strony Główne
- `/dashboard` - główny ekran gracza
- `/cards` - kolekcja kart z galerią
- `/battles` - Turbo Bitwy
- `/mystery` - Mystery Garage
- `/admin` - panel administracyjny

---

## Tailwind - Custom Animacje

W `tailwind.config.js` dodane:
```javascript
animation: {
  'wiggle-intense': 'wiggle-intense 0.8s ease-in-out infinite',
  'shake-soft': 'shake-soft 0.6s ease-in-out infinite',
}
keyframes: {
  'wiggle-intense': {
    '0%, 100%': { transform: 'rotate(-7deg)' },
    '50%': { transform: 'rotate(7deg)' },
  },
}
```

---

## Status Git

**Branch**: main

**Niezcommitowane zmiany:**
- `src/app/(app)/cards/page.tsx` - galeria i extended info
- `src/app/(admin)/admin/page.tsx` - formularz galerii
- `src/hooks/useCards.ts` - fetchCardImages
- `src/types/index.ts` - CardImage interface

**Do zrobienia przed commitem:**
1. Uruchomić SQL w Supabase
2. Przetestować funkcjonalność
3. Commit z opisem zmian

---

## Następne Kroki (TODO)

1. **Uruchomić SQL** w Supabase (extended info + card_images)
2. **Przetestować** dodawanie zdjęć do galerii w admin panelu
3. **Przetestować** wyświetlanie galerii i pobieranie tapet
4. **Commit i push** zmian na Vercel

### Potencjalne Przyszłe Funkcje
- Trade karty między graczami
- Daily spin (losowanie kart)
- Achievements/odznaki
- Push notifications

---

## Kontekst Użytkownika

- Aplikacja działa na Vercel (automatyczny deploy z main branch)
- Baza danych w Supabase
- Użytkownik nie korzysta z aplikacji serwerowej, tylko ze strony
- Preferuje minimalistyczny design
- Wybrał animację "wiggle" z 7° obrotem dla emoji

---

## Komendy

```bash
# Development
npm run dev

# Build
npm run build

# Deploy (automatyczny po push do main)
git add .
git commit -m "Add extended card info and gallery feature"
git push origin main
```
